<% layout('/layouts/userbp') %>
<section>
  <div
    class="container col-12 col-sm-8 col-md-6 justify-content-center shadow-lg mb-5"
  >
    <div class="p-5 m-5">
      <h3>Login</h3>
      <form
        action="/user/otpcomp"
        method="post"
        class="needs-validation"
        novalidate
      >
        <div class="mb-3">
          <label class="form-label" for="email">Email</label>
          <input
            class="form-control"
            type="email"
            id="email"
            value="<%= email %>"
            name="email"
            required
          />
          <div class="mt-3">
            <button class="btn btn-success" disabled>Otp has been sent</button
            ><span class="ms-2">Expires In: </span>
            <button id="timer" class="ms-2 btn btn-warning"></button>
          </div>
        </div>
        <div class="mb-3">
          <label class="form-label" for="otp">Otp:</label>
          <input
            class="form-control"
            type="text"
            id="otp"
            name="otp"
            required
          />
          <p class="logCheck">
            <a href="/user/register">don't have an accout?create One</a>
          </p>
        </div>
        <div class="mb-3">
          <button class="btn btn-primary">Login</button>
        </div>
      </form>
    </div>
  </div>
</section>
<script>
  window.onload = async (e) => {
    timeout = onTimer()
  }
  i = 120
  function onTimer() {
    document.getElementById("timer").innerHTML = i
    i--
    if (i < 0) {
      window.location.href = "http://localhost:7000/user/otplogin"
    } else {
      setTimeout(onTimer, 1000)
    }
  }
</script>
